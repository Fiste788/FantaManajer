;(function(a){function z(){if(window.console&&window.console.log)window.console.log(arguments[0])};var g,b,h=false,e=new Image,n,o=1,t='[^\.]\.(jpg|jpeg|png|tiff|gif|bmp)\s*$';var r=(a.browser.msie&&parseInt(a.browser.version.substr(0,1))<7);a.fn.fancybox=function(k){k=a.extend({},a.fn.fancybox.defaults,k);var i=this;function u(){g=this;b=k;v();return false}function v(){if(h)return;b.itemArray=[];b.itemCurrent=0;if(k.itemArray.length>0){b.itemArray=k.itemArray}else if(i.length==1){var c={href:g.href,title:g.title};if(b.zoomSpeedIn>0||b.zoomSpeedOut>0){var d=a(g).children("img:first").length?a(g).children("img:first"):a(g);c.orig={'width':d.width(),'height':d.height(),'pos':a.fn.fancybox.getPosition(d)}}b.itemArray.push(c)}else{var c={};for(var f=0;f<i.length;f++){c={href:i[f].href,title:i[f].title};if(b.zoomSpeedIn>0||b.zoomSpeedOut>0){var d=a(i[f]).children("img:first").length?a(i[f]).children("img:first"):a(i[f]);c.orig={'width':d.width(),'height':d.height(),'pos':a.fn.fancybox.getPosition(d)}}b.itemArray.push(c)}}while(b.itemArray[b.itemCurrent].href!=g.href){b.itemCurrent++}if(b.overlayShow){if(r){a("#fancy_overlay").empty().prepend('<iframe class="fancy_bigIframe" scrolling="no" frameborder="0"></iframe>')}a("#fancy_overlay").css('opacity',b.overlayOpacity).show()}l()};function l(){a("#fancy_right, #fancy_left, #fancy_close, #fancy_title").hide();var c=b.itemArray[b.itemCurrent].href;if(c.match(/#/)){var d=window.location.href.split('#')[0];d=c.replace(d,'');p('<div id="fancy_div">'+a(d).html()+'</div>',b.frameWidth,b.frameHeight)}else if(c.match(t)){e=new Image;e.src=c;if(e.complete){s()}else{a.fn.fancybox.showLoading();a(e).unbind().bind('load',function(){a("#fancy_loading").hide();s()})}}else{p('<iframe id="fancy_frame" onload="$.fn.fancybox.showIframe()" name="fancy_iframe'+Math.round(Math.random()*1000)+'" frameborder="0" hspace="0" src="'+c+'"></iframe>',b.frameWidth,b.frameHeight)}};function s(){if(b.imageScale){var c=a.fn.fancybox.getViewport();var d=Math.min(Math.min(c[0],e.width)/e.width,Math.min(c[1],e.height)/e.height);var f=Math.round(d*e.width);var j=Math.round(d*e.height)}else{var f=e.width;var j=e.height}p('<img alt="'+b.itemArray[b.itemCurrent].title+'" id="fancy_img" src="'+e.src+'" />',f,j);w()};function w(){if((b.itemArray.length-1)>b.itemCurrent){objNext=new Image();objNext.src=b.itemArray[b.itemCurrent+1].href}if(b.itemCurrent>0){objPrev=new Image();objPrev.src=b.itemArray[b.itemCurrent-1].href}};function p(c,d,f){var j=a.fn.fancybox.getViewport();var x=j[2]+Math.round((j[0]-d)/2)-20;var y=j[3]+Math.round((j[1]-f)/2)-20;var q={'left':x,'top':y,'width':d+'px','height':f+'px'};if(a("#fancy_outer").is(":visible")){if(d==a("#fancy_content").width()&&f==a("#fancy_content").height()){a("#fancy_content").fadeOut("fast",function(){a("#fancy_content").empty().append(a(c)).fadeIn("fast",function(){m()})})}else{a("#fancy_content").fadeOut("fast",function(){a("#fancy_content").empty();a("#fancy_outer").animate(q,b.zoomSpeedChange,"swing",function(){a("#fancy_content").append(a(c)).fadeIn("fast",function(){m()})})})}}else{if(b.zoomSpeedIn>0){a("#fancy_content").empty().append(a(c));a("#fancy_outer").css({'left':(b.itemArray[b.itemCurrent].orig.pos.left-18)+'px','top':(b.itemArray[b.itemCurrent].orig.pos.top-18)+'px','width':b.itemArray[b.itemCurrent].orig.width+'px','height':b.itemArray[b.itemCurrent].orig.height+'px'});h=true;a("#fancy_outer").animate(q,b.zoomSpeedIn,function(){m()})}else{a("#fancy_content").empty().append(a(c));h=true;a("#fancy_outer").css(q).fadeIn("normal",function(){m()})}}};function m(){if(b.itemCurrent!=0){a("#fancy_left").unbind().bind("click",function(c){c.stopPropagation();b.itemCurrent--;l();return false}).show()}else{a("#fancy_left").hide()}if(b.itemCurrent!=(b.itemArray.length-1)){a("#fancy_right").unbind().bind("click",function(c){c.stopPropagation();b.itemCurrent++;l();return false}).show()}else{a("#fancy_right").hide()}a(document).keydown(function(c){if(c.keyCode==27){a.fn.fancybox.close();a(document).unbind("keydown")}else if(c.keyCode==37&&b.itemCurrent!=0){b.itemCurrent--;l();a(document).unbind("keydown")}else if(c.keyCode==39&&b.itemCurrent!=(b.itemArray.length-1)){b.itemCurrent++;l();a(document).unbind("keydown")}});if(b.centerOnScroll){a(window).scroll(a.fn.fancybox.scrollBox)}else{a(window).unbind("scroll")}a(window).resize(function(){a.fn.fancybox.scrollBox()});if(b.hideOnContentClick){a("#fancy_wrap").click(a.fn.fancybox.close)}else{a("#fancy_wrap").unbind()}a("#fancy_close").show();if(b.itemArray[b.itemCurrent].title!==undefined&&b.itemArray[b.itemCurrent].title.length>0){a('#fancy_title div').html(b.itemArray[b.itemCurrent].title);a('#fancy_title').show()}a.fn.fancybox.scrollBox();h=false}return this.unbind('click').click(u)};a.fn.fancybox.scrollBox=function(c){a("#fancy_outer").css('left',(a(document).scrollLeft()+Math.round((a(window).width()-a("#fancy_outer").width())/2)-20));a("#fancy_outer").css('top',(a(document).scrollTop()+Math.round((a(window).height()-a("#fancy_outer").height())/2)-20))};a.fn.fancybox.getNumeric=function(c,d){return parseInt(a.curCSS(c.jquery?c[0]:c,d,true))||0};a.fn.fancybox.getPosition=function(c){var d=c.offset();d.top+=a.fn.fancybox.getNumeric(c,'paddingTop');d.top+=a.fn.fancybox.getNumeric(c,'borderTopWidth');d.left+=a.fn.fancybox.getNumeric(c,'paddingLeft');d.left+=a.fn.fancybox.getNumeric(c,'borderLeftWidth');return d};a.fn.fancybox.showIframe=function(){a("#fancy_loading").hide();a("#fancy_frame").show()};a.fn.fancybox.getViewport=function(){return[a(window).width(),a(window).height(),a(document).scrollLeft(),a(document).scrollTop()]};a.fn.fancybox.animateLoading=function(){if(!a("#fancy_loading").is(':visible')){clearInterval(n);return}a("#fancy_loading > div").css('top',(o*-40)+'px');o=(o+1)%12};a.fn.fancybox.showLoading=function(){clearInterval(n);var c=a.fn.fancybox.getViewport();a("#fancy_loading").css({'left':((c[0]-40)/2+c[2]),'top':((c[1]-40)/2+c[3])}).show();a("#fancy_loading").bind('click',a.fn.fancybox.close);n=setInterval(a.fn.fancybox.animateLoading,66)};a.fn.fancybox.close=function(){a(e).unbind();a("#fancy_close, #fancy_loading, #fancy_left, #fancy_right, #fancy_title").hide();if(a("#fancy_outer").is(":visible")!==false){if(b.zoomSpeedOut>0&&b.itemArray[b.itemCurrent].orig!==undefined){a("#fancy_outer").animate({'left':(b.itemArray[b.itemCurrent].orig.pos.left-18)+'px','top':(b.itemArray[b.itemCurrent].orig.pos.top-18)+'px','width':b.itemArray[b.itemCurrent].orig.width+'px','height':b.itemArray[b.itemCurrent].orig.height+'px'},b.zoomSpeedOut,"swing",function(){h=false;a("#fancy_overlay, #fancy_outer").hide();a("#fancy_content").empty()})}else{h=true;a("#fancy_outer").stop().fadeOut("fast",function(){h=false;a("#fancy_overlay, #fancy_outer").hide();a("#fancy_content").empty()})}}else{a("#fancy_close, #fancy_loading, #fancy_left, #fancy_right, #fancy_overlay").hide()}return false};a.fn.fancybox.build=function(){var c='';c+='<div id="fancy_overlay"></div>';c+='<div id="fancy_wrap">';c+='<div id="fancy_loading"><div></div></div>';c+='<div id="fancy_outer">';c+='<div id="fancy_inner">';c+='<div id="fancy_close"></div>';c+='<div id="fancy_bg"><div class="fancy_bg fancy_bg_n"></div><div class="fancy_bg fancy_bg_ne"></div><div class="fancy_bg fancy_bg_e"></div><div class="fancy_bg fancy_bg_se"></div><div class="fancy_bg fancy_bg_s"></div><div class="fancy_bg fancy_bg_sw"></div><div class="fancy_bg fancy_bg_w"></div><div class="fancy_bg fancy_bg_nw"></div></div>';c+='<div id="fancy_content"></div>';c+='<a id="fancy_left" href="javascript:;"></a><a id="fancy_right" href="javascript:;"></a>';c+='<div id="fancy_title"></div>';c+='</div>';c+='</div>';c+='</div>';a(c).appendTo("body");a('<table cellspacing="0" cellpadding="0" border="0"><tr><td id="fancy_title_left"></td><td id="fancy_title_main"><div></div></td><td id="fancy_title_right"></td></tr></table>').appendTo('#fancy_title');if(r){a("#fancy_inner").prepend('<iframe class="fancy_bigIframe" scrolling="no" frameborder="0"></iframe>')}if(jQuery.fn.pngFix)a(document).pngFix();a("#fancy_overlay, #fancy_bigIframe, #fancy_loading, #fancy_close").bind("click",a.fn.fancybox.close)};a.fn.fancybox.defaults={imageScale:false,zoomOpacity:true,zoomSpeedIn:0,zoomSpeedOut:0,zoomSpeedChange:500,frameWidth:425,frameHeight:355,overlayShow:true,overlayOpacity:0.3,hideOnContentClick:false,centerOnScroll:true,itemArray:[]};a(document).ready(function(){a.fn.fancybox.build()})})(jQuery);